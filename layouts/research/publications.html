{{ define "main" }}
  {{ $items := index .Site.Data "research" "publications" .Lang }}

  <section class="container mx-auto px-4 py-10">
    <h1 class="page-title text-3xl py-12">{{ .Title }}</h1>

    <div class="data-table-wrap">
      <table class="data-table" style="font-size:18px; line-height:1.65;">
        <colgroup>
          <col style="width:72px">
          <col style="width:350px">
          <col style="width:480px"> 
          <col style="width:170px">
          <col style="width:110px">
          <col style="width:110px">
        </colgroup>

        <thead>
          <tr>
            <th>{{ i18n "num" }}</th>
            <th>{{ i18n "authors" }}</th>
            <th>{{ i18n "title" }}</th>
            <th style="text-align:center">{{ i18n "venue" }}</th>
            <th style="text-align:center">{{ i18n "date" }}</th>
            <th style="text-align:center">{{ i18n "links" }}</th>
          </tr>
        </thead>

        <tbody>
          {{ range $i, $p := $items }}
            <tr>
              <td>{{ add $i 1 }}</td>
              <td>
                {{- $authors := $p.authors | default "" -}}
                {{- $authors = replace $authors "Renjun Hu" "<strong>Renjun Hu</strong>" -}}
                {{- $authors = replace $authors "#" "<sup class=\"author-mark\">#</sup>" -}}
                {{- $authors | safeHTML -}}
              </td>
              <td>
                {{ if $p.link }}
                  <a href="{{ $p.link }}"
                    target="_blank"
                    rel="noopener"
                    class="paper-link paper-title-row">
                    
                    <span class="paper-title-text">
                      {{ $p.title }}
                    </span>

                    <span class="paper-title-icon">
                      <i class="fa-regular fa-file-lines text-sm"></i>
                    </span>

                  </a>
                {{ else }}
                  {{ $p.title }}
                {{ end }}
              </td>
              <td style="text-align:center;">
                {{ with $p.venue }}
                  {{ . }}
                {{ else }}
                  -
                {{ end }}
              </td>
              <td style="text-align:center;">
                {{ $p.date }}
              </td>
              <td style="text-align:center;">
                {{- $hasAny := or
                    (and $p.repo (ne $p.repo "-"))
                    (and $p.slides (ne $p.slides "-"))
                    (and $p.benchmark (ne $p.benchmark "-"))
                    (and $p.poster (ne $p.poster "-"))
                -}}

                {{- if not $hasAny -}}
                  -
                {{- else -}}
                  <div class="flex flex-col items-center gap-y-1">

                    {{/* Repo*/}}
                    {{ if and $p.repo (ne $p.repo "-") }}
                      {{ if $p.link2 }}
                        <a href="{{ $p.link2 }}"
                          target="_blank"
                          rel="noopener"
                          class="repo-link inline-flex items-center gap-2">
                          <span style="color: inherit;">{{ $p.repo }}</span>
                          <i class="fa-brands fa-github" style="color: inherit;"></i>
                        </a>
                      {{ else }}
                        <span>{{ $p.repo }}</span>
                      {{ end }}
                    {{ end }}

                    {{/* Slides */}}
                    {{ if and $p.slides (ne $p.slides "-") }}
                      {{ if $p.link3 }}
                        <a href="{{ $p.link3 }}"
                          target="_blank"
                          rel="noopener"
                          class="repo-link">
                          <span style="color: inherit;">{{ $p.slides }}</span>
                        </a>
                      {{ else }}
                        <span>{{ $p.slides }}</span>
                      {{ end }}
                    {{ end }}

                    {{/* Benchmark */}}
                    {{ if and $p.benchmark (ne $p.benchmark "-") }}
                      {{ if $p.link4 }}
                        <a href="{{ $p.link4 | relURL }}"
                          class="repo-link"
                          download>
                          <span style="color: inherit;">{{ $p.benchmark }}</span>
                        </a>
                      {{ else }}
                        <span>{{ $p.benchmark }}</span>
                      {{ end }}
                    {{ end }}

                    {{/* Poster*/}}
                    {{ if and $p.poster (ne $p.poster "-") }}
                      {{ if $p.link5 }}
                        <a href="{{ $p.link5 }}"
                          target="_blank"
                          rel="noopener"
                          class="repo-link">
                          <span style="color: inherit;">{{ $p.poster }}</span>
                        </a>
                      {{ else }}
                        <span>{{ $p.poster }}</span>
                      {{ end }}
                    {{ end }}

                  </div>
                {{- end -}}
              </td>
            </tr>
          {{ end }}
        </tbody>
      </table>
    </div>
  </section>
{{ end }}
